description "Breakerbox Docker Container"

start on runlevel [2345]
stop on runlevel [06]

respawn
respawn limit 5 10

pre-start script
    /usr/bin/docker kill breakerbox || true
    /usr/bin/docker rm breakerbox || true
    /usr/bin/docker pull jplock/breakerbox:{{ breakerbox_docker_version }}
end script

script
    exec /usr/bin/docker run --name breakerbox \
                -p {{ breakerbox_docker_ports|join(' -p ') }} \
                -v {{ breakerbox_docker_volumes|join(' -v ') }} \
                jplock/breakerbox:{{ breakerbox_docker_version }} server /opt/conf/breakerbox.yml
end script
